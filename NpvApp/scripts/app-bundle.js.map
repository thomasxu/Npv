{"version":3,"sources":["app.ts","environment.ts","main.ts","resources/index.ts","resources/elements/about.ts","resources/elements/nav-bar.ts","resources/elements/notification.ts","resources/utility/bootstrap-form-renderer.ts","resources/models/npv-option.ts","resources/models/npv-result.ts","resources/services/npv-service.ts","resources/elements/npv-calculator.ts","resources/elements/npv-results.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject} from \"aurelia-framework\";\nimport {Router} from \"aurelia-router\";\n\n@inject(Router)\n    export class App {      \n    router: Router;\n\n    configureRouter(config, router: Router) {\n        this.router = router;\n\n        config.title = \"Octet\";\n        config.map([\n            { route: [\"\"], moduleId: \"./resources/elements/npv-calculator\", nav: true, title: \"Calculator\" },\n            { route: \"about\", moduleId: \"./resources/elements/about\", nav: true, title: \"About\" },            \n        ]);\n    }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-validation');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","import {bindable} from 'aurelia-framework';\n\nexport class About {\n  @bindable value = \"Thomas\";\n\n  valueChanged(newValue, oldValue) {\n\n  }\n}\n\n","import {bindable} from 'aurelia-framework';\n \nexport class NavBar {\n  @bindable router = null;\n}","import {bindable} from 'aurelia-framework';\n\nexport class Notification {\n  @bindable hasservererror: boolean;  \n}\n\n","import {\r\n  ValidationRenderer,\r\n  RenderInstruction,\r\n  ValidateResult\r\n} from 'aurelia-validation';\r\n\r\nexport class BootstrapFormRenderer {\r\n  render(instruction: RenderInstruction) {\r\n    for (let { result, elements } of instruction.unrender) {\r\n      for (let element of elements) {\r\n        this.remove(element, result);\r\n      }\r\n    }\r\n\r\n    for (let { result, elements } of instruction.render) {\r\n      for (let element of elements) {\r\n        this.add(element, result);\r\n      }\r\n    }\r\n  }\r\n\r\n  add(element: Element, result: ValidateResult) {\r\n    if (result.valid) {\r\n      return;\r\n    }\r\n\r\n    const formGroup = element.closest('.form-group');\r\n    if (!formGroup) {\r\n      return;\r\n    }\r\n\r\n    // add the has-error class to the enclosing form-group div\r\n    formGroup.classList.add('has-error');\r\n\r\n    // add help-block\r\n    const message = document.createElement('span');\r\n    message.className = 'help-block validation-message col-sm-3';\r\n    message.textContent = result.message;\r\n    message.id = `validation-message-${result.id}`;\r\n    formGroup.appendChild(message);\r\n  }\r\n\r\n  remove(element: Element, result: ValidateResult) {\r\n    if (result.valid) {\r\n      return;\r\n    }\r\n\r\n    const formGroup = element.closest('.form-group');\r\n    if (!formGroup) {\r\n      return;\r\n    }\r\n\r\n    // remove help-block\r\n    const message = formGroup.querySelector(`#validation-message-${result.id}`);\r\n    if (message) {\r\n      formGroup.removeChild(message);\r\n\r\n      // remove the has-error class from the enclosing form-group div\r\n      if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\r\n        formGroup.classList.remove('has-error');\r\n      }\r\n    }\r\n  }\r\n}","\r\nexport class NpvOption {\r\n  outflow: number;\r\n  inflows: Inflow[];\r\n  rateOption: RateOption;\r\n\r\n\r\n  constructor(inflowCount: number) {\r\n    this.inflows = new Array<Inflow>();\r\n\r\n    for(var i = 0; i < inflowCount; i++)\r\n    {\r\n        this.inflows.push({value: undefined});\r\n    }\r\n    this.rateOption = new RateOption();\r\n  }\r\n}\r\n\r\nexport class RateOption\r\n{\r\n  lowerDiscount: number;\r\n  upperDiscount: number;\r\n  discountIncrement: number;\r\n}\r\n\r\nexport class Inflow {\r\n  value?: number\r\n}\r\n\r\n","export class NpvResult\r\n{\r\n    discountRate: number; \r\n    netPresentValue: number;\r\n}","import {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {inject} from 'aurelia-framework';\r\nimport {NpvOption, RateOption, Inflow} from '../models/npv-option';\r\n\r\n@inject(HttpClient)\r\nexport class NpvService {\r\n    constructor(private http: HttpClient){\r\n         http.configure(config => {\r\n            config.withBaseUrl('http://localhost:57916/api/npv/');\r\n        });\r\n    }           \r\n\r\n    Calculate(npvOption: NpvOption): any {\r\n      return this.http.fetch('calculate', {method: 'post', body: json(npvOption)}).then(response => response.json());\r\n  \r\n    }\r\n}","import { autoinject, bindable } from 'aurelia-framework';\nimport { inject, NewInstance } from 'aurelia-framework'\nimport { ValidationRules, ValidationController } from 'aurelia-validation'\nimport { BootstrapFormRenderer } from '../utility/bootstrap-form-renderer'\nimport { NpvOption, RateOption, Inflow } from '../models/npv-option'\nimport { NpvResult } from '../models/npv-result'\nimport { NpvService } from '../services/npv-service'\n\n@inject(NewInstance.of(ValidationController), NpvService)\nexport class NpvCalculator {\n  //How many inflow input will be rendered\n  @bindable inflowCount: number = 5;\n  //calculation input parameters\n  npvOption: NpvOption;\n  //calculation output parameters\n  npvResults: NpvResult[];\n  //For showing server error e.g. when api is not avaliable\n  hasServerError: boolean = undefined;\n  readonly RequiredValidationMsg: string = \"Required\";\n\n\n  constructor(private validationController: ValidationController, private npvService: NpvService) {\n    console.log(this.inflowCount);\n\n    //Initialise how many inflows will be rendered initially and add validation rules    \n    this.initViewModelAddValidationRules();\n\n    this.validationController.addRenderer(new BootstrapFormRenderer());\n  }\n\n  calculate() {      \n    //Submit the form if pass validation\n    this.validationController\n      .validate()\n      .then(v => {\n        if (v.valid) {\n          this.calculateImpl();\n        }\n      });\n  }\n\n  //Call service to get npv calculation result\n  calculateImpl() {\n    this.hasServerError = undefined;    \n    this.npvService.Calculate(this.npvOption)\n      .then(r => {        \n        this.hasServerError = false;        \n        this.npvResults = r\n      }).bind(this)\n      .catch(function (err) {\n        console.error(err);        \n        this.hasServerError = true;\n      });\n  }\n\n  reset() {\n    this.hasServerError = undefined;\n    this.npvResults = undefined;\n    this.initViewModelAddValidationRules();\n  }\n\n  initViewModelAddValidationRules() {\n    this.validationController.reset();\n    //Init calculator input parameters\n    this.npvOption = new NpvOption(this.inflowCount);\n\n    this.createCustomValidationRules();\n    this.applyValidationRules();\n  }\n\n  createCustomValidationRules() {\n    ValidationRules.customRule(\n      'positiveNumber',\n      (value, obj) => {\n        var numberValue = parseFloat(value);\n        return isNaN(numberValue) || numberValue > 0;\n      },\n      \"Positive number only\"\n    );\n\n\n    ValidationRules.customRule(\n      'negativeNumber',\n      (value, obj) => {\n        let numberValue = parseFloat(value);\n        return isNaN(numberValue) || numberValue < 0;\n      },\n      \"Negative number only\");\n\n\n    ValidationRules.customRule(\n      'upperRateGreaterEqualToLowerRateAndPositive',\n      (value, obj) => {\n        let upperRate = parseFloat(value);\n        let lowerRate = this.npvOption.rateOption.lowerDiscount;\n\n        return isNaN(upperRate) || isNaN(lowerRate) || (upperRate > 0 && upperRate >= lowerRate)\n      },\n      \"Upper discount must be positive and greater than or equal to lower discount\"\n    );\n\n     ValidationRules.customRule(\n      'LessThanOrEqualToDifferenceOfDiscountsAndPositive',\n      (value, obj) => {\n    console.log(this.npvOption.rateOption.lowerDiscount);\n    console.log(this.npvOption.rateOption.upperDiscount);\n    console.log(this.npvOption.rateOption.discountIncrement);\n\n     console.log(this.npvOption.inflows[0].value);\n     console.log(this.npvOption.outflow);\n\n\n\n        let lowerDiscount: number = this.npvOption.rateOption.lowerDiscount;\n        let upperDiscount: number = this.npvOption.rateOption.upperDiscount;\n\n        let increment = parseFloat(value);\n        if (isNaN(increment) ||\n          isNaN(lowerDiscount) ||\n          isNaN(upperDiscount) ||\n          (increment >= 0 &&  increment <= upperDiscount-lowerDiscount)\n        ) {\n          return true;\n        }\n      },\n      \" Discount Increment must be positive and greater than or equal to difference of lower and higher discounts\"\n    );\n  }\n\n  applyValidationRules() {\n    for (var i = 0; i < this.inflowCount; i++) {\n      ValidationRules\n        .ensure((ifs: Inflow) => ifs.value)\n        .required().withMessage(this.RequiredValidationMsg)\n        .satisfiesRule(\"positiveNumber\")\n        .on(this.npvOption.inflows[i]);\n    }\n\n\n    ValidationRules\n      .ensure((opt: NpvOption) => opt.outflow)\n      .required().withMessage(this.RequiredValidationMsg)\n      .satisfiesRule(\"positiveNumber\")\n      .on(this.npvOption)\n\n\n    ValidationRules\n      .ensure((opt: RateOption) => opt.lowerDiscount)\n      .satisfiesRule(\"positiveNumber\")\n      .required().withMessage(this.RequiredValidationMsg)\n      .ensure((opt: RateOption) => opt.upperDiscount)      \n      .satisfiesRule(\"upperRateGreaterEqualToLowerRateAndPositive\")\n      .required().withMessage(this.RequiredValidationMsg)\n      .ensure((opt: RateOption) => opt.discountIncrement)\n      // discountIncrement must <= UpperDiscount - LowerDiscount and >=0\n      .satisfiesRule(\"LessThanOrEqualToDifferenceOfDiscountsAndPositive\")\n      .required().withMessage(this.RequiredValidationMsg)\n      .on(this.npvOption.rateOption)\n  }\n}\n\n","import {bindable} from 'aurelia-framework';\nimport {NpvResult} from '../models/npv-result'\n\nexport class NpvResults {\n  @bindable results:NpvResult[];\n}\n\n"],"sourceRoot":"../src"}