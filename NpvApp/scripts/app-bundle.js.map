{"version":3,"sources":["app.ts","environment.ts","main.ts","resources/index.ts","resources/elements/about.ts","resources/elements/nav-bar.ts","resources/elements/notification.ts","resources/utility/bootstrap-form-renderer.ts","resources/models/npv-option.ts","resources/models/npv-result.ts","resources/services/npv-service.ts","resources/elements/npv-calculator.ts","resources/elements/npv-results.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject} from \"aurelia-framework\";\r\nimport {Router} from \"aurelia-router\";\r\n\r\n@inject(Router)\r\n    export class App {      \r\n    router: Router;\r\n\r\n    configureRouter(config, router: Router) {\r\n        this.router = router;\r\n\r\n        config.title = \"Octet\";\r\n        config.map([\r\n            { route: [\"\"], moduleId: \"./resources/elements/npv-calculator\", nav: true, title: \"Calculator\" },\r\n            { route: \"about\", moduleId: \"./resources/elements/about\", nav: true, title: \"About\" },            \r\n        ]);\r\n    }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import {Aurelia} from 'aurelia-framework'\r\nimport environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\n(<any>Promise).config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia: Aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .feature('resources')\r\n    .plugin('aurelia-validation');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","import {FrameworkConfiguration} from 'aurelia-framework';\r\n\r\nexport function configure(config: FrameworkConfiguration) {\r\n  //config.globalResources([]);\r\n}\r\n","import {bindable} from 'aurelia-framework';\r\n\r\nexport class About {\r\n  @bindable value = \"Thomas\";\r\n\r\n  valueChanged(newValue, oldValue) {\r\n\r\n  }\r\n}\r\n\r\n","import {bindable} from 'aurelia-framework';\r\n \r\nexport class NavBar {\r\n  @bindable router = null;\r\n}","import {bindable} from 'aurelia-framework';\r\n\r\nexport class Notification {\r\n  @bindable hasservererror: boolean;  \r\n}\r\n\r\n","import {\r\n  ValidationRenderer,\r\n  RenderInstruction,\r\n  ValidateResult\r\n} from 'aurelia-validation';\r\n\r\nexport class BootstrapFormRenderer {\r\n  render(instruction: RenderInstruction) {\r\n    for (let { result, elements } of instruction.unrender) {\r\n      for (let element of elements) {\r\n        this.remove(element, result);\r\n      }\r\n    }\r\n\r\n    for (let { result, elements } of instruction.render) {\r\n      for (let element of elements) {\r\n        this.add(element, result);\r\n      }\r\n    }\r\n  }\r\n\r\n  add(element: Element, result: ValidateResult) {\r\n    if (result.valid) {\r\n      return;\r\n    }\r\n\r\n    const formGroup = element.closest('.form-group');\r\n    if (!formGroup) {\r\n      return;\r\n    }\r\n\r\n    // add the has-error class to the enclosing form-group div\r\n    formGroup.classList.add('has-error');\r\n\r\n    // add help-block\r\n    const message = document.createElement('span');\r\n    message.className = 'help-block validation-message col-sm-3';\r\n    message.textContent = result.message;\r\n    message.id = `validation-message-${result.id}`;\r\n    formGroup.appendChild(message);\r\n  }\r\n\r\n  remove(element: Element, result: ValidateResult) {\r\n    if (result.valid) {\r\n      return;\r\n    }\r\n\r\n    const formGroup = element.closest('.form-group');\r\n    if (!formGroup) {\r\n      return;\r\n    }\r\n\r\n    // remove help-block\r\n    const message = formGroup.querySelector(`#validation-message-${result.id}`);\r\n    if (message) {\r\n      formGroup.removeChild(message);\r\n\r\n      // remove the has-error class from the enclosing form-group div\r\n      if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\r\n        formGroup.classList.remove('has-error');\r\n      }\r\n    }\r\n  }\r\n}","\r\nexport class NpvOption {\r\n  outflow: number;\r\n  inflows: Inflow[];\r\n  rateOption: RateOption;\r\n\r\n\r\n  constructor(inflowCount: number) {\r\n    this.inflows = new Array<Inflow>();\r\n\r\n    for(var i = 0; i < inflowCount; i++)\r\n    {\r\n        this.inflows.push({value: undefined});\r\n    }\r\n    this.rateOption = new RateOption();\r\n  }\r\n}\r\n\r\nexport class RateOption\r\n{\r\n  lowerDiscount: number;\r\n  upperDiscount: number;\r\n  discountIncrement: number;\r\n}\r\n\r\nexport class Inflow {\r\n  value?: number\r\n}\r\n\r\n","export class NpvResult\r\n{\r\n    discountRate: number; \r\n    netPresentValue: number;\r\n}","import {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {inject} from 'aurelia-framework';\r\nimport {NpvOption, RateOption, Inflow} from '../models/npv-option';\r\n\r\n@inject(HttpClient)\r\nexport class NpvService {\r\n    readonly BaseUrlNpvService = \"http://localhost:57916/api/npv/\";\r\n\r\n    constructor(private http: HttpClient){\r\n         http.configure(config => {\r\n            config.withBaseUrl(this.BaseUrlNpvService);\r\n        });\r\n    }           \r\n\r\n    Calculate(npvOption: NpvOption): any {\r\n      return this.http.fetch('calculate', {method: 'post', body: json(npvOption)}).then(response => \r\n      {   \r\n          //Bad request for client input (Model validation fail on server side\r\n          //but pass in client side, should never happen)          \r\n          if(response.status == 400)\r\n          {\r\n            throw new Error(\"Model valiation fail on server side\");            \r\n          }\r\n\r\n          return response.json();\r\n      });\r\n  \r\n    }\r\n}","import { autoinject, bindable } from 'aurelia-framework';\r\nimport { inject, NewInstance } from 'aurelia-framework'\r\nimport { ValidationRules, ValidationController } from 'aurelia-validation'\r\nimport { BootstrapFormRenderer } from '../utility/bootstrap-form-renderer'\r\nimport { NpvOption, RateOption, Inflow } from '../models/npv-option'\r\nimport { NpvResult } from '../models/npv-result'\r\nimport { NpvService } from '../services/npv-service'\r\n\r\n@inject(NewInstance.of(ValidationController), NpvService)\r\nexport class NpvCalculator {\r\n  //How many inflow input will be rendered\r\n  @bindable initialInflowCount: number = 5;\r\n  //calculation input parameters\r\n  npvOption: NpvOption;\r\n  //calculation output parameters\r\n  npvResults: NpvResult[];\r\n  //For showing server error e.g. when api is not avaliable\r\n  hasServerError: boolean = undefined;\r\n  readonly RequiredValidationMsg: string = \"Required\";\r\n  readonly MaxInflowCount = 15;\r\n\r\n\r\n  constructor(private validationController: ValidationController, private npvService: NpvService) {\r\n    console.log(this.initialInflowCount);\r\n\r\n    //Initialise how many inflows will be rendered initially and add validation rules    \r\n    this.initViewModelAddValidationRules();\r\n\r\n    this.validationController.addRenderer(new BootstrapFormRenderer());\r\n  }\r\n\r\n  removeInflow(index:number) {    \r\n    if(this.npvOption.inflows.length <= 1)\r\n    {\r\n        //Do not have time for adding bootstrap model dialog just alert here\r\n        alert(\"You must have at least 1 inflow.\");\r\n        return false;\r\n    }\r\n    this.npvOption.inflows.splice(index, 1);    \r\n  }\r\n\r\n  addInflow(index:number) {\r\n     if(this.npvOption.inflows.length >= 15)\r\n    {\r\n        //Do not have time for adding bootstrap model dialog just alert here\r\n        alert(\"Only 15 inflows is allow.\");\r\n        return false;\r\n    }\r\n\r\n    this.npvOption.inflows.splice(index + 1, 0, {value: undefined});\r\n    this.applyValidationRules();\r\n  }\r\n\r\n  calculate() {      \r\n    //Submit the form if pass validation\r\n    this.validationController\r\n      .validate()\r\n      .then(v => {\r\n        if (v.valid) {\r\n          this.calculateImpl();\r\n        }\r\n      });\r\n  }\r\n\r\n  //Call service to get npv calculation result\r\n  calculateImpl() {\r\n    this.hasServerError = undefined;    \r\n    this.npvService.Calculate(this.npvOption)\r\n      .then(r => {                   \r\n        this.hasServerError = false;\r\n        console.log(r);        \r\n        this.npvResults = r\r\n      }).bind(this)\r\n      .catch(function (err) {                \r\n        console.error(err);        \r\n        this.hasServerError = true;\r\n      });\r\n  }\r\n\r\n  reset() {\r\n    this.hasServerError = undefined;\r\n    this.npvResults = undefined;\r\n    this.initViewModelAddValidationRules();\r\n  }\r\n\r\n  initViewModelAddValidationRules() {\r\n    this.validationController.reset();\r\n    //Init calculator input parameters\r\n    this.npvOption = new NpvOption(this.initialInflowCount);\r\n\r\n    this.createCustomValidationRules();\r\n    this.applyValidationRules();\r\n  }\r\n\r\n  createCustomValidationRules() {\r\n    ValidationRules.customRule(\r\n      'positiveNumber',\r\n      (value, obj) => {\r\n        var numberValue = parseFloat(value);\r\n        return isNaN(numberValue) || numberValue > 0;\r\n      },\r\n      \"Positive number only\"\r\n    );\r\n\r\n\r\n    ValidationRules.customRule(\r\n      'negativeNumber',\r\n      (value, obj) => {\r\n        let numberValue = parseFloat(value);\r\n        return isNaN(numberValue) || numberValue < 0;\r\n      },\r\n      \"Negative number only\");\r\n\r\n\r\n    ValidationRules.customRule(\r\n      'upperRateGreaterEqualToLowerRateAndPositive',\r\n      (value, obj) => {\r\n        let upperRate = parseFloat(value);\r\n        let lowerRate = this.npvOption.rateOption.lowerDiscount;\r\n\r\n        return isNaN(upperRate) || isNaN(lowerRate) || (upperRate > 0 && upperRate >= lowerRate)\r\n      },\r\n      \"Upper discount must be positive and greater than or equal to lower discount\"\r\n    );\r\n\r\n     ValidationRules.customRule(\r\n      'LessThanOrEqualToDifferenceOfDiscountsAndPositive',\r\n      (value, obj) => {\r\n        let lowerDiscount: number = this.npvOption.rateOption.lowerDiscount;\r\n        let upperDiscount: number = this.npvOption.rateOption.upperDiscount;\r\n\r\n        let increment = parseFloat(value);\r\n        if (isNaN(increment) ||\r\n          isNaN(lowerDiscount) ||\r\n          isNaN(upperDiscount) ||\r\n          (increment >= 0 &&  increment <= upperDiscount-lowerDiscount)\r\n        ) {\r\n          return true;\r\n        }\r\n      },\r\n      \" Discount Increment must be positive and greater than or equal to difference of lower and higher discounts\"\r\n    );\r\n  }\r\n\r\n  applyValidationRules() {\r\n    let inflows = this.npvOption.inflows;\r\n\r\n    for (var i = 0; i < inflows.length; i++) {\r\n      ValidationRules\r\n        .ensure((ifs: Inflow) => ifs.value)\r\n        .required().withMessage(this.RequiredValidationMsg)\r\n        .satisfiesRule(\"positiveNumber\")\r\n        .on(inflows[i]);\r\n    }\r\n\r\n\r\n    ValidationRules\r\n      .ensure((opt: NpvOption) => opt.outflow)\r\n      .required().withMessage(this.RequiredValidationMsg)\r\n      .satisfiesRule(\"positiveNumber\")\r\n      .on(this.npvOption)\r\n\r\n\r\n    ValidationRules\r\n      .ensure((opt: RateOption) => opt.lowerDiscount)\r\n      .satisfiesRule(\"positiveNumber\")\r\n      .required().withMessage(this.RequiredValidationMsg)\r\n      .ensure((opt: RateOption) => opt.upperDiscount)      \r\n      .satisfiesRule(\"upperRateGreaterEqualToLowerRateAndPositive\")\r\n      .required().withMessage(this.RequiredValidationMsg)\r\n      .ensure((opt: RateOption) => opt.discountIncrement)\r\n      // discountIncrement must <= UpperDiscount - LowerDiscount and >=0\r\n      .satisfiesRule(\"LessThanOrEqualToDifferenceOfDiscountsAndPositive\")\r\n      .required().withMessage(this.RequiredValidationMsg)\r\n      .on(this.npvOption.rateOption)\r\n  }\r\n}\r\n\r\n","import {bindable} from 'aurelia-framework';\r\nimport {NpvResult} from '../models/npv-result'\r\n\r\nexport class NpvResults {\r\n  @bindable results:NpvResult[];\r\n}\r\n\r\n"],"sourceRoot":"../src"}